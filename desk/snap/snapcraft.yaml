name: ai-platform-desktop
base: core22
version: '1.0.0'
summary: AIæ™ºèƒ½ä½“å¹³å° - AIé©±åŠ¨çš„æ™ºèƒ½å¼€å‘å¹³å°
description: |
  AIæ™ºèƒ½ä½“å¹³å°æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å¼€å‘å·¥å…·ï¼Œé›†æˆäº†å…ˆè¿›çš„AIæŠ€æœ¯ï¼Œä¸ºå¼€å‘è€…æä¾›æ™ºèƒ½ä»£ç åˆ†æã€è‡ªåŠ¨æ¨èã€å®æ—¶åä½œç­‰åŠŸèƒ½ã€‚
  
  ä¸»è¦åŠŸèƒ½:
  - ğŸ¤– AIæ™ºèƒ½ä»£ç åˆ†æå’Œæ¨è
  - ğŸ‘¥ å®æ—¶å›¢é˜Ÿåä½œ
  - ğŸ”„ è‡ªåŠ¨æ›´æ–°æœºåˆ¶
  - ğŸ’» å¤šå¹³å°æ”¯æŒ
  - â˜ï¸ äº‘ç«¯æ•°æ®åŒæ­¥
  
  æ— è®ºæ˜¯ä¸ªäººé¡¹ç›®è¿˜æ˜¯å›¢é˜Ÿåä½œï¼Œéƒ½èƒ½æ˜¾è‘—æå‡å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚

grade: stable
confinement: strict
license: MIT
website: https://aiplatform.com
contact: support@aiplatform.com
issues: https://github.com/your-username/ai-platform/issues
source-code: https://github.com/your-username/ai-platform

apps:
  ai-platform-desktop:
    command: bin/desktop-launch $SNAP/usr/bin/ai-platform-desktop
    desktop: usr/share/applications/ai-platform-desktop.desktop
    extensions:
      - gnome-3-38
    plugs:
      - home
      - network
      - browser-support
      - audio-playback
      - pulseaudio
      - opengl
      - x11
      - unity7
      - desktop
      - desktop-legacy
      - gsettings
      - screen-inhibit-control
      - hardware-observe
      - mount-observe
      - network-observe
      - system-observe
    environment:
      DISABLE_WAYLAND: 1
      TMPDIR: $XDG_RUNTIME_DIR

parts:
  desktop-gtk3:
    source: https://github.com/ubuntu/snapcraft-desktop-helpers.git
    source-subdir: gtk
    plugin: make
    build-packages:
      - libgtk-3-dev
    stage-packages:
      - libgtk-3-0
      - libgtk-3-dev
      - libglib2.0-dev
      - libpango1.0-dev
      - libcairo2-dev
      - libgdk-pixbuf2.0-dev
      - libatk1.0-dev
      - libgtk-3-0
      - libgdk-pixbuf2.0-0
      - libpango-1.0-0
      - libcairo2
      - libatk1.0-0
      - libx11-xcb1
      - libxcomposite1
      - libxcursor1
      - libxdamage1
      - libxi6
      - libxtst6
      - libnss3
      - libcups2
      - libxss1
      - libxrandr2
      - libasound2
      - libpangocairo-1.0-0
      - libatk1.0-0
      - libcairo-gobject2
      - libgtk-3-0
      - libgdk-pixbuf2.0-0

  ai-platform-desktop:
    after: [desktop-gtk3]
    plugin: nodejs
    source: .
    override-build: |
      npm install
      npm run build:renderer
      npm run build:main
      npm install --production
      electron-builder --linux --x64 --dir
      cp -r dist-electron/linux-unpacked $SNAPCRAFT_PART_INSTALL/usr/bin/
    build-packages:
      - build-essential
      - python3
    stage-packages:
      - libnss3
      - libnspr4
      - libatk-bridge2.0-0
      - libdrm2
      - libxkbcommon0
      - libxcbcomposite0
      - libxdamage1
      - libxrandr2
      - libgbm1
      - libxss1
      - libasound2
    prime:
      - -usr/share/doc
      - -usr/share/man

  cleanup:
    after: [ai-platform-desktop]
    plugin: nil
    build-snaps: [core18]
    override-stage: |
      echo "Cleaning up..."

slots:
  dbus-daemon:
    interface: dbus
    bus: session
    name: com.aiplatform.desktop

plugs:
  ai-platform-home:
    interface: home
    write:
      - $HOME/.ai-platform
      - $HOME/.config/ai-platform
      - $HOME/.local/share/ai-platform

  ai-platform-network:
    interface: network
    network:
      - client
      - server

  ai-platform-browser:
    interface: browser-support
    allow-installation:
      slot: true

environment:
  XDG_DATA_DIRS: $SNAP_USER_DATA:$SNAP/usr/share:$XDG_DATA_DIRS
  XDG_CONFIG_DIRS: $SNAP_USER_CONFIG:$SNAP/etc/xdg:$XDG_CONFIG_DIRS